[[extend 'layout.html']]

<style>
  [v-cloak] { display: none; }
</style>

<div class="section" id="app" v-cloak>
  <!-- Left Column (3/4 width): Post Creation and Feed  -->
  <div class="left-column" style="width: 75%; float: left; padding-right: 1rem;">
    <!-- Post Creation Area -->
    <h2>Slug Posts</h2>
    <textarea id="post-input" v-model="newPostContent" placeholder="Write something..."></textarea>
    <button id="post-button" @click="createPost">Post</button>

    <!-- Post Feed -->
    <h2>Slimy Posts</h2>
    <div v-for="post in filteredPosts" :key="post.id" class="post">
      <p class="post-content">{{ post.content }}</p>
      <p class="post-info">Posted on {{ post.created_on }} by {{ post.user_email }}</p>
      <button v-if="post.user_email === currentUser" @click="deletePost(post.id)" class="delete-button">Delete</button>
    </div>
  </div>

  <!-- Right Column (1/4 width): Tags -->
  <div class="right-column" style="width: 25%; float: left;">
    <h2>Tags</h2>
    <div class="tags">
      <button
        v-for="tag in tags"
        :key="tag.id"
        :class="{ tag: true, active: activeTags.includes(tag.name) }"
        @click="toggleTag(tag.name)">
        {{ tag.name }}
      </button>
    </div>
  </div>
</div>

[[block page_scripts]]
<script>
  let get_posts_url = "[[=XML(get_posts_url)]]";
  let create_post_url = "[[=XML(create_post_url)]]";
  let delete_post_url = "[[=XML(delete_post_url)]]";
</script>
<script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.6.8/axios.min.js"></script>
<script src="[[=URL('static/js/index.js')]]"></script>
[[end]]
